#!/usr/bin/env python3
# coding: utf-8

# Copyright (C) 2017-present Robert Griesel
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program. If not, see <http://www.gnu.org/licenses/>

from lemma.infrastructure.service_locator import ServiceLocator


class CharacterDB(object):

    alphabetical_symbols = {'ğ‘', 'ğ‘', 'ğ‘', 'ğ‘‘', 'ğ‘’', 'ğ‘“', 'ğ‘”', '\u210E', 'ğ‘–', 'ğ‘—', 'ğ‘˜', 'ğ‘™', 'ğ‘š', 'ğ‘›', 'ğ‘œ', 'ğ‘', 'ğ‘', 'ğ‘Ÿ', 'ğ‘ ', 'ğ‘¡', 'ğ‘¢', 'ğ‘£', 'ğ‘¤', 'ğ‘¥', 'ğ‘¦', 'ğ‘§', 'ğ´', 'ğµ', 'ğ¶', 'ğ·', 'ğ¸', 'ğ¹', 'ğº', 'ğ»', 'ğ¼', 'ğ½', 'ğ¾', 'ğ¿', 'ğ‘€', 'ğ‘', 'ğ‘‚', 'ğ‘ƒ', 'ğ‘„', 'ğ‘…', 'ğ‘†', 'ğ‘‡', 'ğ‘ˆ', 'ğ‘‰', 'ğ‘Š', 'ğ‘‹', 'ğ‘Œ', 'ğ‘', 'ğ›¼', 'ğ›½', 'ğ›¾', 'ğ›¿', 'ğœ€', 'ğœ', 'ğœ‚', 'ğœƒ', 'ğœ„', 'ğœ…', 'ğœ†', 'ğœ‡', 'ğœˆ', 'ğœ‰', 'ğœŠ', 'ğœ‹', 'ğœŒ', 'ğœ', 'ğœ', 'ğœ', 'ğœ', 'ğœ‘', 'ğœ’', 'ğœ“', 'ğœ”', 'ğœ•', 'ğœ–', 'ğœ—', 'ğœ˜', 'ğœ™', 'ğœš', 'ğœ›', 'ğ›¢', 'ğ›£', 'ğ›¤', 'ğ›¥', 'ğ›¦', 'ğ›§', 'ğ›¨', 'ğ›©', 'ğ›ª', 'ğ›«', 'ğ›¬', 'ğ›­', 'ğ›®', 'ğ›¯', 'ğ›°', 'ğ›±', 'ğ›²', 'ğ›³', 'ğ›´', 'ğ›µ', 'ğ›¶', 'ğ›·', 'ğ›¸', 'ğ›¹', 'ğ›º', 'Î±', 'Î²', 'Î³', 'Î´', 'Îµ', 'Î¶', 'Î·', 'Î¸', 'Î¹', 'Îº', 'Î»', 'Î¼', 'Î½', 'Î¾', 'Î¿', 'Ï€', 'Ï', 'Ï‚', 'Ïƒ', 'Ï„', 'Ï…', 'Ï†', 'Ï‡', 'Ïˆ', 'Ï‰', 'ÏŠ', 'Ï‹', 'ÏŒ', 'Ï', 'Ï', 'Ï', 'Ï', 'Ï‘', 'Ï’', 'Ï“', 'Ï”', 'Ï•', 'Ï–', 'Ï—', 'Ï˜', 'Ï™', 'Ïš', 'Ï›', 'Ïœ', 'Ï', 'Ï', 'ÏŸ', 'Ï ', 'Ï¡', 'Ï¢', 'Ï£', 'Ï¤', 'Ï¥', 'Ï¦', 'Ï§', 'Ï¨', 'Ï©', 'Ïª', 'Ï«', 'Ï¬', 'Ï­', 'Ï®', 'Ï¯', 'Ï°', 'Ï±', 'Ï²', 'Ï³', 'Ï´', 'Ïµ', 'Î‘', 'Î’', 'Î“', 'Î”', 'Î•', 'Î–', 'Î—', 'Î˜', 'Î™', 'Îš', 'Î›', 'Îœ', 'Î', 'Î', 'ÎŸ', 'Î ', 'Î¡', 'Î£', 'Î¤', 'Î¥', 'Î¦', 'Î§', 'Î¨', 'Î©', 'ğ’œ', 'â„¬', 'ğ’', 'ğ’Ÿ', 'â„°', 'â„±', 'ğ’¢', 'â„‹', 'â„', 'ğ’¥', 'ğ’¦', 'â„’', 'â„³', 'ğ’©', 'ğ’ª', 'ğ’«', 'ğ’¬', 'â„›', 'ğ’®', 'ğ’¯', 'ğ’°', 'ğ’±', 'ğ’²', 'ğ’³', 'ğ’´', 'ğ’µ'}
    ordinary_symbols = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '!', '?', '.', '|', 'â€–', '/', 'â€²', '@', '"', 'Â¬', 'âˆ', '\\', 'âˆ…', 'â™¯', 'â™­', 'â™®', 'âˆ ', 'âˆ¢', 'âˆ¡', 'â™£', 'â™¢', 'â™¡', 'â™ ', 'âˆ€', 'âˆƒ', 'âˆ„', 'âˆ', 'â„•', 'â„¤', 'â„š', 'ğ•€', 'â„', 'â„‚', 'â„‘', 'â„œ', 'â„µ', 'â„˜', 'â„', 'ğš¤', 'ğš¥', 'ğ•‚', 'â„“', 'âŠ¥', 'âŠ¤', 'âˆ‚', 'âˆ‡', 'Ã°', 'â„§', 'â‹®', 'â‹¯'}
    binary_operations = {'+', 'âˆ’', 'âˆ—', 'Â±', 'âˆ“', 'Ã—', 'Ã·', 'âˆ—', 'â‹†', 'â—¦', 'â€¢', 'â‹‡', 'â‹‰', 'â‹Š', 'Â·', 'âˆ”', 'â‹‹', 'â‹Œ', 'â¨¿', 'âŠ—', 'âŠ•', 'âŠ–', 'âŠ˜', 'âŠ™', 'âŠš', 'âŠ', 'âŠ›', 'â–³', 'â–½', 'â—', 'â–·', 'âˆª', 'âˆ©', 'âŠ', 'â‰€', 'â§µ', 'âŠ“', 'âŠ”', 'âˆ§', 'âˆ¨', 'â€ ', 'â€¡', 'âŠº'}
    relations = {'=', '<', '>', ':', 'â', 'â†', 'â†‘', 'â†’', 'â†“', 'â†”', 'â†•', 'â†–', 'â†—', 'â†˜', 'â†™', 'â†š', 'â†›', 'â†œ', 'â†', 'â†', 'â†Ÿ', 'â† ', 'â†¡', 'â†¢', 'â†£', 'â†¤', 'â†¥', 'â†¦', 'â†§', 'â†¨', 'â†©', 'â†ª', 'â†«', 'â†¬', 'â†­', 'â†®', 'â†¯', 'â†°', 'â†±', 'â†²', 'â†³', 'â†¶', 'â†·', 'â†¼', 'â†½', 'â†¾', 'â†¿', 'â‡€', 'â‡', 'â‡‚', 'â‡ƒ', 'â‡„', 'â‡…', 'â‡†', 'â‡‡', 'â‡ˆ', 'â‡‰', 'â‡Š', 'â‡‹', 'â‡Œ', 'â‡', 'â‡', 'â‡', 'â‡', 'â‡‘', 'â‡’', 'â‡“', 'â‡”', 'â‡•', 'â‡–', 'â‡—', 'â‡˜', 'â‡™', 'â‡š', 'â‡›', 'â‡œ', 'â‡', 'â‡¤', 'â‡¥', 'â‡´', 'â‡µ', 'â‡¶', 'â‡·', 'â‡¸', 'â‡¹', 'â‡º', 'â‡»', 'â‡¼', 'â‡½', 'â‡¾', 'â‡¿', 'âŸµ', 'âŸ¶', 'âŸ·', 'âŸ¸', 'âŸ¹', 'âŸº', 'âŸ»', 'âŸ¼', 'âˆˆ', 'âˆ‰', 'â‹ˆ', 'âˆ', 'âŠ¸', 'â‹”', 'âˆ´', 'âˆµ', 'â‰ ', 'â‰¡', 'â‰ˆ', 'âˆ¼', 'â‰ƒ', 'â‰…', 'â‰‡', 'âŒ£', 'âŒ¢', 'â‰', 'â‰¬', 'â‰º', 'â‰»', 'âŠ€', 'âŠ', 'âª¯', 'âª°', 'âŸ‚', 'âŠ¢', 'âŠ£', 'âŠ§', 'âˆ£', 'âˆ¤', 'âˆ¥', 'âˆ¦', 'â‰®', 'â‰¯', 'â‹–', 'â‹—', 'â‰ª', 'â‰«', 'â‰¤', 'â‰¥', 'âª‡', 'âªˆ', 'â‰°', 'â‰±', 'âŠ²', 'âŠ³', 'â‹ª', 'â‹«', 'âŠ´', 'âŠµ', 'â‹¬', 'â‹­', 'âŠ‚', 'âŠƒ', 'âŠ„', 'âŠ…', 'âŠ†', 'âŠ‡', 'âŠŠ', 'âŠ‹', 'âŠˆ', 'âŠ‰', 'âŠ', 'âŠ', 'âŠ‘', 'âŠ’', 'âˆˆ', 'âˆ‰'}
    punctuation_marks = {',', ';'}
    opening_symbols = {'(', '[', '{', 'âŒŠ', 'âŒˆ', 'âŸ¨'}
    closing_symbols = {')', ']', '}', 'âŒ‹', 'âŒ‰', 'âŸ©'}
    latex_to_unicode = {
        'textendash': 'â€“',
        'textemdash': 'â€”',
        'guillemetleft': 'Â«',
        'guillemetright': 'Â»',
        'quotedblbase': 'â€',
        'textquotedblleft': 'â€œ',
        'textquotedblright': 'â€',
        'alpha': 'ğ›¼',
        'beta': 'ğ›½',
        'gamma': 'ğ›¾',
        'delta': 'ğ›¿',
        'epsilon': 'ğœ–',
        'varepsilon': 'ğœ€',
        'zeta': 'ğœ',
        'eta': 'ğœ‚',
        'theta': 'ğœƒ',
        'vartheta': 'ğœ—',
        'iota': 'ğœ„',
        'kappa': 'ğœ…',
        'lambda': 'ğœ†',
        'mu': 'ğœ‡',
        'nu': 'ğœˆ',
        'xi': 'ğœ‰',
        'pi': 'ğœ‹',
        'varpi': 'ğœ›',
        'rho': 'ğœŒ',
        'varrho': 'ğœš',
        'sigma': 'ğœ',
        'varsigma': 'ğœ',
        'tau': 'ğœ',
        'upsilon': 'ğœ',
        'phi': 'ğœ™',
        'varphi': 'ğœ‘',
        'chi': 'ğœ’',
        'psi': 'ğœ“',
        'omega': 'ğœ”',
        'Gamma': 'Î“',
        'varGamma': 'ğ›¤',
        'Delta': 'Î”',
        'varDelta': 'ğ›¥',
        'Theta': 'Î˜',
        'varTheta': 'ğ›©',
        'Lambda': 'Î›',
        'varLambda': 'ğ›¬',
        'Xi': 'Î',
        'varXi': 'ğ›¯',
        'Pi': 'Î ',
        'varPi': 'ğ›±',
        'Sigma': 'Î£',
        'varSigma': 'ğ›´',
        'Upsilon': 'Î¥',
        'varUpsilon': 'ğ›¶',
        'Phi': 'Î¦',
        'varPhi': 'ğ›·',
        'Psi': 'Î¨',
        'varPsi': 'ğ›¹',
        'Omega': 'Î©',
        'varOmega': 'ğ›º',
        'leftarrow': 'â†',
        'leftrightarrow': 'â†”',
        'rightarrow': 'â†’',
        'mapsto': 'â†¦',
        'longleftarrow': 'âŸµ',
        'longleftrightarrow': 'âŸ·',
        'longrightarrow': 'âŸ¶',
        'longmapsto': 'âŸ¼',
        'downarrow': 'â†“',
        'updownarrow': 'â†•',
        'uparrow': 'â†‘',
        'nwarrow': 'â†–',
        'searrow': 'â†˜',
        'nearrow': 'â†—',
        'swarrow': 'â†™',
        'nleftarrow': 'â†š',
        'nleftrightarrow': 'â†®',
        'nrightarrow': 'â†›',
        'hookleftarrow': 'â†©',
        'hookrightarrow': 'â†ª',
        'twoheadleftarrow': 'â†',
        'twoheadrightarrow': 'â† ',
        'leftarrowtail': 'â†¢',
        'rightarrowtail': 'â†£',
        'Leftarrow': 'â‡',
        'Leftrightarrow': 'â‡”',
        'Rightarrow': 'â‡’',
        'Longleftarrow': 'âŸ¸',
        'Longleftrightarrow': 'âŸº',
        'Longrightarrow': 'âŸ¹',
        'Updownarrow': 'â‡•',
        'Uparrow': 'â‡‘',
        'Downarrow': 'â‡“',
        'nLeftarrow': 'â‡',
        'nLeftrightarrow': 'â‡',
        'nRightarrow': 'â‡',
        'leftleftarrows': 'â‡‡',
        'leftrightarrows': 'â‡†',
        'rightleftarrows': 'â‡„',
        'rightrightarrows': 'â‡‰',
        'downdownarrows': 'â‡Š',
        'upuparrows': 'â‡ˆ',
        'curvearrowleft': 'â†¶',
        'curvearrowright': 'â†·',
        'Lsh': 'â†°',
        'Rsh': 'â†±',
        'looparrowleft': 'â†«',
        'looparrowright': 'â†¬',
        'leftrightsquigarrow': 'â†­',
        'leftsquigarrow': 'â‡œ',
        'rightsquigarrow': 'â‡',
        'Lleftarrow': 'â‡š',
        'leftharpoondown': 'â†½',
        'rightharpoondown': 'â‡',
        'leftharpoonup': 'â†¼',
        'rightharpoonup': 'â‡€',
        'rightleftharpoons': 'â‡Œ',
        'leftrightharpoons': 'â‡‹',
        'downharpoonleft': 'â‡ƒ',
        'upharpoonleft': 'â†¿',
        'downharpoonright': 'â‡‚',
        'upharpoonright': 'â†¾',
        'neg': 'Â¬',
        'infty': 'âˆ',
        'prime': 'â€²',
        'backslash': '\\',
        'emptyset': 'âˆ…',
        'varnothing': 'âˆ…',
        'sharp': 'â™¯',
        'flat': 'â™­',
        'natural': 'â™®',
        'angle': 'âˆ ',
        'sphericalangle': 'âˆ¢',
        'measuredangle': 'âˆ¡',
        'clubsuit': 'â™£',
        'diamondsuit': 'â™¢',
        'heartsuit': 'â™¡',
        'spadesuit': 'â™ ',
        'forall': 'âˆ€',
        'exists': 'âˆƒ',
        'nexists': 'âˆ„',
        'complement': 'âˆ',
        'mathbbN': 'â„•',
        'mathbbZ': 'â„¤',
        'mathbbQ': 'â„š',
        'mathbbI': 'ğ•€',
        'mathbbR': 'â„',
        'mathbbC': 'â„‚',
        'Im': 'â„‘',
        'Re': 'â„œ',
        'aleph': 'â„µ',
        'wp': 'â„˜',
        'hbar': 'â„',
        'imath': 'ğš¤',
        'jmath': 'ğš¥',
        'Bbbk': 'ğ•‚',
        'ell': 'â„“',
        'bot': 'âŠ¥',
        'top': 'âŠ¤',
        'partial': 'âˆ‚',
        'nabla': 'âˆ‡',
        'eth': 'Ã°',
        'mho': 'â„§',
        'pm': 'Â±',
        'mp': 'âˆ“',
        'times': 'Ã—',
        'div': 'Ã·',
        'ast': 'âˆ—',
        'star': 'â‹†',
        'circ': 'â—¦',
        'bullet': 'â€¢',
        'divideontimes': 'â‹‡',
        'ltimes': 'â‹‰',
        'rtimes': 'â‹Š',
        'cdot': 'Â·',
        'dotplus': 'âˆ”',
        'leftthreetimes': 'â‹‹',
        'rightthreetimes': 'â‹Œ',
        'amalg': 'â¨¿',
        'otimes': 'âŠ—',
        'oplus': 'âŠ•',
        'ominus': 'âŠ–',
        'oslash': 'âŠ˜',
        'odot': 'âŠ™',
        'circledcirc': 'âŠš',
        'circleddash': 'âŠ',
        'circledast': 'âŠ›',
        'bigtriangleup': 'â–³',
        'bigtriangledown': 'â–½',
        'triangleleft': 'â—',
        'triangleright': 'â–·',
        'cup': 'âˆª',
        'cap': 'âˆ©',
        'uplus': 'âŠ',
        'wr': 'â‰€',
        'setminus': 'â§µ',
        'sqcap': 'âŠ“',
        'sqcup': 'âŠ”',
        'wedge': 'âˆ§',
        'vee': 'âˆ¨',
        'dagger': 'â€ ',
        'ddagger': 'â€¡',
        'intercal': 'âŠº',
        'bowtie': 'â‹ˆ',
        'propto': 'âˆ',
        'multimap': 'âŠ¸',
        'pitchfork': 'â‹”',
        'therefore': 'âˆ´',
        'because': 'âˆµ',
        'neq': 'â‰ ',
        'equiv': 'â‰¡',
        'approx': 'â‰ˆ',
        'sim': 'âˆ¼',
        'simeq': 'â‰ƒ',
        'cong': 'â‰…',
        'ncong': 'â‰‡',
        'smile': 'âŒ£',
        'frown': 'âŒ¢',
        'asymp': 'â‰',
        'between': 'â‰¬',
        'prec': 'â‰º',
        'succ': 'â‰»',
        'nprec': 'âŠ€',
        'nsucc': 'âŠ',
        'preceq': 'âª¯',
        'succeq': 'âª°',
        'perp': 'âŸ‚',
        'vdash': 'âŠ¢',
        'dashv': 'âŠ£',
        'models': 'âŠ§',
        'mid': 'âˆ£',
        'nmid': 'âˆ¤',
        'parallel': 'âˆ¥',
        'nparallel': 'âˆ¦',
        'nless': 'â‰®',
        'ngtr': 'â‰¯',
        'lessdot': 'â‹–',
        'gtrdot': 'â‹—',
        'll': 'â‰ª',
        'gg': 'â‰«',
        'leq': 'â‰¤',
        'geq': 'â‰¥',
        'lneq': 'âª‡',
        'gneq': 'âªˆ',
        'nleq': 'â‰°',
        'ngeq': 'â‰±',
        'vartriangleleft': 'âŠ²',
        'vartriangleright': 'âŠ³',
        'ntriangleleft': 'â‹ª',
        'ntriangleright': 'â‹«',
        'trianglelefteq': 'âŠ´',
        'trianglerighteq': 'âŠµ',
        'ntrianglelefteq': 'â‹¬',
        'ntrianglerighteq': 'â‹­',
        'subset': 'âŠ‚',
        'supset': 'âŠƒ',
        'nsubset': 'âŠ„',
        'nsupset': 'âŠ…',
        'subseteq': 'âŠ†',
        'supseteq': 'âŠ‡',
        'subsetneq': 'âŠŠ',
        'supsetneq': 'âŠ‹',
        'nsubseteq': 'âŠˆ',
        'nsupseteq': 'âŠ‰',
        'sqsubset': 'âŠ',
        'sqsupset': 'âŠ',
        'sqsubseteq': 'âŠ‘',
        'sqsupseteq': 'âŠ’',
        'in': 'âˆˆ',
        'notin': 'âˆ‰',
        'cdotp': 'Â·',
        'colon': ':',
        'vdots': 'â‹®',
        'cdots': 'â‹¯',
        'lparen': '(',
        'rparen': ')',
        'lbrack': '[',
        'rbrack': ']',
        'lbrace': '{',
        'rbrace': '}',
        'lfloor': 'âŒŠ',
        'rfloor': 'âŒ‹',
        'lceil': 'âŒˆ',
        'rceil': 'âŒ‰',
        'langle': 'âŸ¨',
        'rangle': 'âŸ©',
        'vert': '|',
        'Vert': 'â€–',
        'mathcalA': 'ğ’œ',
        'mathcalB': 'â„¬',
        'mathcalC': 'ğ’',
        'mathcalD': 'ğ’Ÿ',
        'mathcalE': 'â„°',
        'mathcalF': 'â„±',
        'mathcalG': 'ğ’¢',
        'mathcalH': 'â„‹',
        'mathcalI': 'â„',
        'mathcalJ': 'ğ’¥',
        'mathcalK': 'ğ’¦',
        'mathcalL': 'â„’',
        'mathcalM': 'â„³',
        'mathcalN': 'ğ’©',
        'mathcalO': 'ğ’ª',
        'mathcalP': 'ğ’«',
        'mathcalQ': 'ğ’¬',
        'mathcalR': 'â„›',
        'mathcalS': 'ğ’®',
        'mathcalT': 'ğ’¯',
        'mathcalU': 'ğ’°',
        'mathcalV': 'ğ’±',
        'mathcalW': 'ğ’²',
        'mathcalX': 'ğ’³',
        'mathcalY': 'ğ’´',
        'mathcalZ': 'ğ’µ'
    }
    replacements = {
        '--': 'â€“',
        '---': 'â€”',
        '<<': 'Â«',
        '>>': 'Â»',
        ',,': 'â€',
        '``': 'â€œ',
        'Â´Â´': 'â€',
        '\'\'': 'â€'
    }

    def get_unicode_from_latex_name(name):
        return CharacterDB.latex_to_unicode[name]

    def is_mathsymbol(char):
        return char in CharacterDB.ordinary_symbols or char in CharacterDB.binary_operations or char in CharacterDB.relations or char in CharacterDB.punctuation_marks or char in CharacterDB.opening_symbols or char in CharacterDB.closing_symbols or char in CharacterDB.alphabetical_symbols

    def is_ordinary_symbol(char):
        return char in CharacterDB.ordinary_symbols or char in CharacterDB.alphabetical_symbols

    def is_binary_operation(char):
        return char in CharacterDB.binary_operations

    def is_relation(char):
        return char in CharacterDB.relations

    def is_punctuation_mark(char):
        return char in CharacterDB.punctuation_marks

    def is_opening_symbol(char):
        return char in CharacterDB.opening_symbols

    def is_closing_symbol(char):
        return char in CharacterDB.closing_symbols

    def is_whitespace(char):
        return (ServiceLocator.get_regex_matcher('\\s').match(char) != None)

    def has_replacement(text):
        return text in CharacterDB.replacements

    def get_replacement(text):
        return CharacterDB.replacements[text]


